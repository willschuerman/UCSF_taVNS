theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+
ylab('Mean (z) ±95% CI')+
scale_color_manual(values=myPalette)
data.summary %>% filter(variable %in% c('RSA','RMSSD'))%>%
ggplot(aes(x=BlockType,y=Mean,group=Order,color=Order))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
geom_errorbar(aes(ymin=Lower,ymax=Upper),width=0.1)+
facet_wrap('variable',scales='free_y')+
ggpubr::theme_pubclean()+
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+
ylab('Mean (z) ±95% CI')+
scale_color_manual(values=myPalette)
data.summary %>% filter(variable %in% c('Mean.Heart.Rate','Mean.IBI','SDNN','NN50','pNN50'))%>%
ggplot(aes(x=BlockType,y=Mean,group=Order,color=Order))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
geom_errorbar(aes(ymin=Lower,ymax=Upper),width=0.1)+
facet_wrap('variable',scales='free_y')+
ggpubr::theme_pubclean()+
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+
ylab('Mean (z) ±95% CI')+
scale_color_manual(values=myPalette)
p <- data.summary %>% filter(variable %in% c('RSA','RMSSD'),
BlockType %in% c('Baseline','Stim-A1','Washout1','Stim-A2','Washout2'),
Order %in% c('Canal - Concha','Sham - Sham'))%>%
ggplot(aes(x=BlockType,y=Mean,group=Order,color=Order))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
geom_errorbar(aes(ymin=Lower,ymax=Upper),width=0.1)+
facet_wrap('variable',scales='free_y')+
ggpubr::theme_pubclean()+
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+
ylab('Mean (z) ±95% CI')+
theme(legend.title = element_blank(),legend.text=element_text(size=15))+
scale_color_manual(values=myPalette[c(3,1)],label=c('Canal','Sham'))
ggsave("/Users/williamschuerman/Desktop/SRA Presentation Figures/canal_agg.png", width = 20, height = 10, units = "cm")
# plot mean for each individual
data.summary <- data %>% group_by(Participant,Order,BlockType,variable) %>% summarise(value=mean(zValue,na.rm=T))
data.summary %>%
ggplot(aes(x=BlockType,y=value,color=Order,group=Participant))+
#geom_boxplot()+
geom_point()+
geom_line()+
facet_wrap('variable',scales='free_y')+
ggpubr::theme_pubclean()+
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+
ylab('Mean (z)')
# calculate mean and 95% CI for each variable
data.summary <- data %>%
select(BlockType,variable,zValue) %>%
group_by(BlockType,variable) %>%
summarise(data = list(smean.cl.boot(cur_data(), conf.int = .95, B = 1000, na.rm = TRUE))) %>%
tidyr::unnest_wider(data)
data.summary %>% ggplot(aes(x=BlockType,y=Mean,group=''))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
geom_errorbar(aes(ymin=Lower,ymax=Upper),width=0.1)+
facet_wrap('variable',scales='free_y')+
ggpubr::theme_pubclean()+
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))
# calculate mean and 95% CI for each group and variable
data.summary <- data %>%
select(Order,BlockType,variable,zValue) %>% # here, change to value/cValue/zValue
group_by(Order,BlockType,variable) %>%
summarise(data = list(smean.cl.boot(cur_data(), conf.int = .95, B = 1000, na.rm = TRUE))) %>%
tidyr::unnest_wider(data)
data.summary %>% ggplot(aes(x=BlockType,y=Mean,group=Order,color=Order))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
geom_errorbar(aes(ymin=Lower,ymax=Upper),width=0.1)+
facet_wrap('variable',scales='free_y')+
ggpubr::theme_pubclean()+
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+
ylab('Mean (z) ±95% CI')+
scale_color_manual(values=myPalette)
data.summary %>% filter(variable %in% c('RSA','RMSSD'))%>%
ggplot(aes(x=BlockType,y=Mean,group=Order,color=Order))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
geom_errorbar(aes(ymin=Lower,ymax=Upper),width=0.1)+
facet_wrap('variable',scales='free_y')+
ggpubr::theme_pubclean()+
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+
ylab('Mean (z) ±95% CI')+
scale_color_manual(values=myPalette)
data.summary %>% filter(variable %in% c('Mean.Heart.Rate','Mean.IBI','SDNN','NN50','pNN50'))%>%
ggplot(aes(x=BlockType,y=Mean,group=Order,color=Order))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
geom_errorbar(aes(ymin=Lower,ymax=Upper),width=0.1)+
facet_wrap('variable',scales='free_y')+
ggpubr::theme_pubclean()+
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+
ylab('Mean (z) ±95% CI')+
scale_color_manual(values=myPalette)
p <- data.summary %>% filter(variable %in% c('Mean.Heart.Rate','Mean.IBI','SDNN','pNN50'),
BlockType %in% c('Baseline','Stim-A1','Washout1','Stim-A2','Washout2'),
Order %in% c('Concha - Canal','Sham - Sham'))%>%
ggplot(aes(x=BlockType,y=Mean,group=Order,color=Order))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
geom_errorbar(aes(ymin=Lower,ymax=Upper),width=0.1)+
facet_wrap('variable',scales='free_y')+
ggpubr::theme_pubclean()+
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+
ylab('Mean (z) ±95% CI')+
theme(legend.title = element_blank(),legend.text=element_text(size=15))+
scale_color_manual(values=myPalette[c(2,1)],label=c('Concha','Sham'))
p
ggsave("/Users/williamschuerman/Desktop/SRA Presentation Figures/concha_agg_altmetrics.png", width = 20, height = 10, units = "cm")
p <- data.summary %>% filter(variable %in% c('Mean.Heart.Rate','Mean.IBI','SDNN','pNN50'),
BlockType %in% c('Baseline','Stim-A1','Washout1','Stim-A2','Washout2'),
Order %in% c('Canal - Concha','Sham - Sham'))%>%
ggplot(aes(x=BlockType,y=Mean,group=Order,color=Order))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
geom_errorbar(aes(ymin=Lower,ymax=Upper),width=0.1)+
facet_wrap('variable',scales='free_y')+
ggpubr::theme_pubclean()+
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+
ylab('Mean (z) ±95% CI')+
theme(legend.title = element_blank(),legend.text=element_text(size=15))+
scale_color_manual(values=myPalette[c(3,1)],label=c('Canal','Sham'))
ggsave("/Users/williamschuerman/Desktop/SRA Presentation Figures/canal_agg_altmetrics.png", width = 20, height = 10, units = "cm")
p <- data.summary %>% filter(variable %in% c('Mean.Heart.Rate','Mean.IBI','SDNN','pNN50'),
BlockType %in% c('Baseline','Stim-A1','Washout1','Stim-A2','Washout2'),
Order %in% c('Canal - Concha','Sham - Sham'))%>%
ggplot(aes(x=BlockType,y=Mean,group=Order,color=Order))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
geom_errorbar(aes(ymin=Lower,ymax=Upper),width=0.1)+
facet_wrap('variable',scales='free_y')+
ggpubr::theme_pubclean()+
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+
ylab('Mean (z) ±95% CI')+
theme(legend.title = element_blank(),legend.text=element_text(size=15))+
scale_color_manual(values=myPalette[c(3,1)],label=c('Canal','Sham'))
ggsave("/Users/williamschuerman/Desktop/SRA Presentation Figures/canal_agg_altmetrics.png", width = 20, height = 15, units = "cm")
p <- data.summary %>% filter(variable %in% c('Mean.Heart.Rate','Mean.IBI','SDNN','pNN50'),
BlockType %in% c('Baseline','Stim-A1','Washout1','Stim-A2','Washout2'),
Order %in% c('Concha - Canal','Sham - Sham'))%>%
ggplot(aes(x=BlockType,y=Mean,group=Order,color=Order))+
geom_point()+
geom_line()+
geom_hline(yintercept=0)+
geom_errorbar(aes(ymin=Lower,ymax=Upper),width=0.1)+
facet_wrap('variable',scales='free_y')+
ggpubr::theme_pubclean()+
theme(axis.text.x = element_text(angle = 90, vjust = 0.5, hjust=1))+
ylab('Mean (z) ±95% CI')+
theme(legend.title = element_blank(),legend.text=element_text(size=15))+
scale_color_manual(values=myPalette[c(2,1)],label=c('Concha','Sham'))
ggsave("/Users/williamschuerman/Desktop/SRA Presentation Figures/concha_agg_altmetrics.png", width = 20, height = 15, units = "cm")
variable <- c('Password', 'Improvisation', 'Word Context', '20 Questions','Category Switch')
d <- data.frame(variable,means,sds)
password_mean <- -0.49
password_sd <- 1.2
improv_mean <- -0.49
improv_sd <- 1.13
wordcontext_mean <- -0.24
wordcontext_sd <- 1.02
questions_mean <- -0.56
questions_sd <- 0.98
category_mean <- -0.22
category_sd <- 0.95
n = 198
means <- c(password_mean,improv_mean,wordcontext_mean,questions_mean,
category_mean)
sds <- c(password_sd,improv_sd,wordcontext_sd,questions_sd,
category_sd)
variable <- c('Password', 'Improvisation', 'Word Context', '20 Questions','Category Switch')
d <- data.frame(variable,means,sds)
d
d <- data.frame(variable,means,sds,n)
d
d$upper <- d$means + 1.96*d$sds/sqrt(d$n)
password_mean <- -0.49
password_sd <- 1.2
improv_mean <- -0.49
improv_sd <- 1.13
wordcontext_mean <- -0.24
wordcontext_sd <- 1.02
questions_mean <- -0.56
questions_sd <- 0.98
category_mean <- -0.22
category_sd <- 0.95
n = 198
means <- c(password_mean,improv_mean,wordcontext_mean,questions_mean,
category_mean)
sds <- c(password_sd,improv_sd,wordcontext_sd,questions_sd,
category_sd)
variable <- c('Password', 'Improvisation', 'Word Context', '20 Questions','Category Switch')
d <- data.frame(variable,means,sds,n)
d$upper <- d$means + 1.96*d$sds/sqrt(d$n)
d$lower <- d$means - 1.96*d$sds/sqrt(d$n)
d
library(tidyverse)
d %>% ggplot(aes(x=variable,y=means))+
geom_point()+
geom_errorbar(aes(ymin=lower,ymax=upper),width=0.2)
d %>% ggplot(aes(x=variable,y=means))+
geom_hline(yintercept=0)+
geom_point()+
geom_errorbar(aes(ymin=lower,ymax=upper),width=0.2)
d %>% ggplot(aes(x=variable,y=means))+
geom_hline(yintercept=0)+
geom_point()+
geom_errorbar(aes(ymin=lower,ymax=upper),width=0.2)+
ggpubr::theme_pubr()
d %>% ggplot(aes(x=variable,y=means))+
geom_hline(yintercept=0)+
geom_point()+
geom_errorbar(aes(ymin=lower,ymax=upper),width=0.2)+
ggpubr::theme_pubr()+
ylab('Average Decrease in RSA')
x <- (-1,  0, 1)
y <- (1.58, 1.38,1.19)
plot(x,y)
x <- c(-1,  0, 1)
y <- c(1.58, 1.38,1.19)
plot(x,y)
d <- data.frame(x,y)
ggplot(d,aes(x=x,y=y))+
geom_point()+
geom_line()+
ggpubr::theme_pubr()
ggplot(d,aes(x=x,y=y))+
geom_point()+
geom_line()+
ggpubr::theme_pubr()+
xlab('Vagal Flexibility')+
ylab('Self-reported Shame')
library(tidyverse)
# define custom color palette
myPalette <- c("#8961b3","#b55960","#999c47")
data_dir <- getwd()
data_dir <- sub('/Code/R','/Data/SART_Tests',data_dir)
data_dir
library(stringr)
file_name <- list.files(path=data_dir,pattern='*DryRunLi')
file_name
file_name <- list.files(path=data_dir,pattern='*GDryRunLi')
file_name
file_names <- list.files(path=data_dir,pattern='*GDryRunLi')
tmp = file_names[1]
tmp <- read_csv(str_c(data_dir,'/',f))
f = file_names[1]
tmp <- read_csv(str_c(data_dir,'/',f))
tmp <- as_tibble(t(tmp),name_repair=T)
tmp <- as_tibble(t(tmp),.name_repair=T)
tmp <- as_tibble(t(tmp),name_repair=T)
glimpse(tmp)
tmp <- read_csv(str_c(data_dir,'/',f))
tmp.head()
head(tmp)
tmp <- tmp %>% retype()
??retype()
library(hablar)
tmp <- tmp %>% retype()
glimpse(tmp)
file_names[0]
f
# prepare data
make_table=1
for(f in file_names){
tmp <- read_csv(str_c(data_dir,'/',f))
tmp <- tmp %>% retype()
tmp$Participant <- substr(f,6,7)
if(make_table==1){
data <- tmp
make_table=0
}else{
data <- rbind(data,tmp)
}
}
tail(data)
names(data)
unique(data$blockcode)
unique(data$blocknum)
library(Hmisc)
library(hablar)
library(stringr)
library(Hmisc)
library(tidyverse)
# define custom color palette
myPalette <- c("#8961b3","#b55960","#999c47")
data_dir <- getwd()
data_dir <- sub('/Code/R','/Data/SART_Tests',data_dir)
file_names <- list.files(path=data_dir,pattern='*GDryRunLi')
#### prepare data ####
make_table=1
for(f in file_names){
tmp <- read_csv(str_c(data_dir,'/',f))
tmp <- tmp %>% retype()
tmp$Participant <- substr(f,6,7)
if(make_table==1){
data <- tmp
make_table=0
}else{
data <- rbind(data,tmp)
}
}
names(data)
d <- summarySE(data,measurevar='values.RT',groupvars='blocknum')
??summarySE
library(Rmisc)
library(hablar)
library(stringr)
library(Rmisc)
library(tidyverse)
# define custom color palette
myPalette <- c("#8961b3","#b55960","#999c47")
data_dir <- getwd()
data_dir <- sub('/Code/R','/Data/SART_Tests',data_dir)
file_names <- list.files(path=data_dir,pattern='*GDryRunLi')
#### prepare data ####
make_table=1
for(f in file_names){
tmp <- read_csv(str_c(data_dir,'/',f))
tmp <- tmp %>% retype()
tmp$Participant <- substr(f,6,7)
if(make_table==1){
data <- tmp
make_table=0
}else{
data <- rbind(data,tmp)
}
}
#### visualize RT ####
d <- summarySE(data,measurevar='values.RT',groupvars='blocknum')
d
ggplot(d,aes(x=blocknum,y=values.RT))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci))
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci))
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci))+
ggpubr::theme_pubclean()
names(d)
names(data)
data$trialcode
tmp$Participant
tmp$subject
any(tmp$blocknum>0)
tmp$blocknum
tmp
tmp$subject==998
tmp$subject %2%
mod(998,2)
modulus
tmp$subject %% 2
all(tmp$subject %% 2)
all(tmp$subject %% 2 == 0)
library(hablar)
library(stringr)
library(Rmisc)
library(tidyverse)
# define custom color palette
myPalette <- c("#8961b3","#b55960","#999c47")
data_dir <- getwd()
data_dir <- sub('/Code/R','/Data/SART_Tests',data_dir)
file_names <- list.files(path=data_dir,pattern='*GDryRunLi')
#### prepare data ####
make_table=1
for(f in file_names){
tmp <- read_csv(str_c(data_dir,'/',f))
tmp <- tmp %>% retype()
tmp$stimblock = 0
if(any(tmp$blocknum>0)){
if(all(tmp$subject %% 2 == 0)){
tmp[tmp$blocknum<3,]$stimblock =1
}else{
tmp[tmp$blocknum>2,]$stimblock =1
}
}
if(make_table==1){
data <- tmp
make_table=0
}else{
data <- rbind(data,tmp)
}
}
#### visualize RT ####
d <- summarySE(data,measurevar='values.RT',groupvars='blocknum')
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci))+
ggpubr::theme_pubclean()
d <- summarySE(data,measurevar='values.RT',groupvars=c('blocknum','stimblock'))
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci))+
ggpubr::theme_pubclean()
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT,color=as.factor(stimblock)))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci))+
ggpubr::theme_pubclean()
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT,color=as.factor(stimblock)))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci)),width=0.1+
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT,color=as.factor(stimblock)))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci),width=0.1)+
ggpubr::theme_pubclean()
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci),width=0.1)+
ggpubr::theme_pubclean()
d$stimblock <- as.factor(d$stimblock)
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci),width=0.1)+
ggpubr::theme_pubclean()
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci),width=0.1)+
ggpubr::theme_pubclean()+
scale_color_manual()
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci),width=0.1)+
ggpubr::theme_pubclean()+
scale_color_manual(myPalette)
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci),width=0.1)+
ggpubr::theme_pubclean()+
scale_color_manual(palette=myPalette)
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci),width=0.1)+
ggpubr::theme_pubclean()+
scale_color_manual(values=myPalette)
names(data)
d <- summarySE(data,measurevar='values.count_validGo',groupvars=c('blocknum','stimblock'))
d$stimblock <- as.factor(d$stimblock)
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci),width=0.1)+
ggpubr::theme_pubclean()+
scale_color_manual(values=myPalette)
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.count_validGo,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=values.count_validGo-ci,ymax=values.count_validGo+ci),width=0.1)+
ggpubr::theme_pubclean()+
scale_color_manual(values=myPalette)
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.correctsuppressions,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=values.correctsuppressions-ci,ymax=values.correctsuppressions+ci),width=0.1)+
ggpubr::theme_pubclean()+
scale_color_manual(values=myPalette)
d <- summarySE(data,measurevar='values.correctsuppressions',groupvars=c('blocknum','stimblock'))
d$stimblock <- as.factor(d$stimblock)
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.correctsuppressions,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=values.correctsuppressions-ci,ymax=values.correctsuppressions+ci),width=0.1)+
ggpubr::theme_pubclean()+
scale_color_manual(values=myPalette)
names(data)
d <- summarySE(data,measurevar='correct',groupvars=c('blocknum','stimblock'))
d$stimblock <- as.factor(d$stimblock)
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=correct,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=correct-ci,ymax=correct+ci),width=0.1)+
ggpubr::theme_pubclean()+
scale_color_manual(values=myPalette)
data$trialcode
d <- summarySE(data[data$trialcode=='go'],measurevar='values.RT',groupvars=c('blocknum','stimblock'))
d <- summarySE(data[data$trialcode=='go',],measurevar='values.RT',groupvars=c('blocknum','stimblock'))
d$stimblock <- as.factor(d$stimblock)
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci),width=0.1)+
ggpubr::theme_pubclean()+
scale_color_manual(values=myPalette)
d <- summarySE(data[data$blocknum>0,],measurevar='values.RT',groupvars=c('blocknum','stimblock','trialcode'))
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci),width=0.1)+
ggpubr::theme_pubclean()+
scale_color_manual(values=myPalette)+
facet_wrap('trialcode')
d <- summarySE(data[data$blocknum>0,],measurevar='values.RT',groupvars=c('blocknum','stimblock','trialcode'))
d$stimblock <- as.factor(d$stimblock)
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=values.RT,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=values.RT-ci,ymax=values.RT+ci),width=0.1)+
ggpubr::theme_pubclean()+
scale_color_manual(values=myPalette)+
facet_wrap('trialcode')
d <- summarySE(data[data$blocknum>0,],measurevar='correct',groupvars=c('blocknum','stimblock','trialcode'))
d$stimblock <- as.factor(d$stimblock)
ggplot(d[d$blocknum>0,],aes(x=blocknum,y=correct,color=stimblock))+
geom_point()+
geom_errorbar(aes(ymin=correct-ci,ymax=correct+ci),width=0.1)+
ggpubr::theme_pubclean()+
scale_color_manual(values=myPalette)+
facet_wrap('trialcode')
